@model Informa.Web.ViewModels.FinanceCompanies.CompaniesCarouselViewModel

<script src="~/js/components/AMchartsGroup.js"></script>
<script type="text/javascript" src="/dist/js/amcharts.js"></script>
<script type="text/javascript" src="/dist/js/serial.js"></script>

<div class="carousel-div" id="main-carousel">
    <div class="companies_heading">
        <span>@Model.CarouselHeading</span>
    </div>
    <div>
        <ul id="mycarousel1" class="owl-carousel owl-theme">
            @foreach (var company in Model.CompanyCarouselPanels)
            {
                <li class="item">
                    <div class="item-wrapper">
                        <div class="li-content-company">
                            <div class="companylogo">
                                <a href="@company.CompanyLandingPageUrl"><img src="@company.CompanyLogo" alt="companyLogo" /></a>
                            </div>
                            <div class="companyLinks">
                                <p class="li-content-company__headline"><a href="@company.CompanyLandingPageUrl">@company.CompanyName</a></p>
                                <p class="view-more-info li-content-company__headline"><a href="@company.CompanyLandingPageUrl">@Model.ViewMoreInfoText</a></p>
                            </div>
                        </div>
                    </div>
                    @foreach (var Graph in company.Graphs)
                    {
                        var chartDivId = company.CompanyId + "_" + Graph.GraphID;
                        <div class="item-wrapper">
                            <div class="li-content-graph">
                                <p class="li-content-company__headline"><a href="@company.CompanyGraphPageUrl&companyid=@company.CompanyId&graphid=@Graph.GraphID">@Graph.GraphTitle</a></p>
                                <a href="@company.CompanyGraphPageUrl&companyid=@company.CompanyId&graphid=@Graph.GraphID"><div id="@chartDivId"></div></a>
                            </div>

                            @if (!string.IsNullOrEmpty(Graph.FinanceResult))
                            {
                                <script>
                                    var data = JSON.parse(JSON.stringify(@Html.Raw(Graph.FinanceResult)));
                                    var chartData = JSON.stringify(data[0]["@Graph.GraphID"]);
                                    var chartData = data[0]["@Graph.GraphID"];
                                    PrintCompanyGraph(chartData, "@chartDivId", "@Graph.GraphType", "@Graph.GraphColor")
                                </script>
                            }
                            else
                            {
                                <script>
                                    PrintCompanyGraph("", "@chartDivId", "@Graph.GraphType", "@Graph.GraphColor")
                                </script>
                            }
                        </div>
                    }
                </li>
            }
        </ul>
    </div>
</div>
