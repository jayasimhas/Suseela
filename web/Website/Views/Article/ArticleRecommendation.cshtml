@model Informa.Web.ViewModels.Articles.ArticleRecommendationViewModel
@{
    if (Model.IsThisComponentEnabled)
    {

        <div class="contentRecommendations">
            @*Editor Picks*@
            <div class="article-related-content">
                @if (Model.EditorsPicks != null && Model.EditorsPicks.Count > 0)
                {
                    <h2>@Model.EditorPicksText</h2>

                    foreach (var article in Model.EditorsPicks)
                    {
                        var sponsoredclass = article.SponsoredBy != null ? "sponsored_cont" : string.Empty;
                        <div class="contentRecomm-article @sponsoredclass">
                            @if (article.SponsoredBy != null)
                            {
                                <div class="article-metadata">
                                    <ul>
                                        <li>
                                            <time class="article-metadata__date sponsored_title">@article.SponsoredBy.Title</time>
                                        </li>
                                        <li>
                                            @if (article.SponsoredBy.Sponsor_Logo != null)
                                            {
                                                <a href="@article.SponsoredBy.Sponsor_Link" class="click-utag" 
                                                   data-info='{"event_name":"article_click_through,recommendation_content", "page_name": "@Model.PageName", "click_through_destination": "@article.Title", "ga_eventCategory": "@article.Title", "ga_eventAction": "Editors Pick", "ga_eventLabel": "@article.Title", "recommendation_category": "Editors Pick"}'><img src=@article.SponsoredBy.Sponsor_Logo.Src /></a>
                                            }
                                        </li>
                                    </ul>
                                </div>
                            }
                            @{ 
                                string img = article.Featured_Image_16_9 != null ? article.Featured_Image_16_9.Src : "";
                            }
                            <img class="article-related-content__img" src="@img" />
                            <span class="article-related-content__category">@Model.PublicationName</span>
                            <h5><a class="click-utag" href="@article._Url" 
                                                   data-info='{"event_name":"article_click_through,recommendation_content", "page_name": "@Model.PageName", "click_through_destination": "@article.Title", "ga_eventCategory": "@article.Title", "ga_eventAction": "Editors Pick", "ga_eventLabel": "@article.Title", "recommendation_category": "Editors Pick"}'>@article.Title</a></h5>
                            <time class="article-related-content__date">@article.Actual_Publish_Date.ToString("d MMM yyyy")</time>
                        </div>
                    }
                }

                @*What to read next*@
                @if (!Model.HideWhatToReadNext)
                {
                    <input type="hidden" id="hdnTaxonomyIds" value="@Html.Raw(Model.TaxonomyItems)" />
                    <div class="ContentRecomm-ReadNext">
                        <h2>@Model.WhatToReadNextText</h2>
                    </div>
                }

                @*Suggested For you*@
                @if (!Model.HideSuggestedForYou)
                {
                    if (Model.IsAuthenticated && Model.IsGlobalToggleEnabled)
                    {
                        if (Model.IsFollowingAnyItem)
                        {
                            <input type="hidden" id="hdnPreferanceIds" value="@Html.Raw(Model.PreferedTaxonomies)" />
                        }
                        else if (!string.IsNullOrWhiteSpace(Model.EntitlementIDs))
                        {
                            <input type="hidden" id="hdnPreferanceIds" value="@Html.Raw(Model.EntitlementIDs)" />
                        }
                        <div class="suggested-article">
                            <h2>@Model.SuggestedForYouText</h2>
                        </div>
                    }
                }
            </div>
        </div>
    }
}

