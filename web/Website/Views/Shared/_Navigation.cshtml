@inherits CustomGlassView<SideNavigationMenuViewModel>

@if(Model.MenuOpenFirstTime)
{
    <input type="hidden" class="menu-open-first-time-checked" value="@Model.MenuOpenFirstTime" />
    if (HttpContext.Current.Request.Cookies["menunavigationcookie"] == null && HttpContext.Current.Request.Url.LocalPath.Equals("/"))
    {
        var cookiePolicy = new HttpCookie("menunavigationcookie")
        {
            Value = "yes",
            //Expires = DateTime.Now.AddMonths(expiryMonth),
            //Expires = DateTime.Now.AddDays(expiryMonth),
            HttpOnly = true
        };
        HttpContext.Current.Response.SetCookie(cookiePolicy);
    }
    // HttpCookie menuNavigationCookie = HttpContext.Current.Request.Cookies["menunavigationcookie"]?? new HttpCookie("menunavigationcookie");
    //menuNavigationCookie.Value = "yes";
}

<div class="main-menu js-full-menu-toggle">
    <div class="menu-toggler js-menu-toggle-button">
        <button class="menu-toggler__button">
            <span>@Model.MenuButtonText</span>
        </button>
        @Model.MenuText
    </div>
    @if (Model.Navigation != null)
    {
        foreach (var navigation in Model.Navigation.Where(n => !(n.Link == null && !n.Children.Any())))
        {
            if (navigation.Link == null && navigation.Text == null && navigation.Children.Any())
            {
                <dl class="main-menu__footer">
                    @foreach (var navigationChild in navigation.Children)
                    {
                        <dd class="main-menu__footer-link">
                            <a href="@navigationChild.Link.Url" target="@navigationChild.Link.Target">@navigationChild.Text</a>
                        </dd>
                    }
                    <dd class="bottomSpace"></dd>
                    <dd class="bottomSpace"></dd>
                    <dd class="bottomSpace"></dd>
                    <dd class="bottomSpace"></dd>
                    <dd class="bottomSpace"></dd>

                </dl>  }
            else
            {
                <ul class="main-menu__section">
                    <li class="main-menu__section-title main-menu__hoverable js-toggle-menu-section is-active">
                        @if (navigation.Children.Any())
                        {
                            <svg class="main-menu__arrow-icon  js-hoist-menu-click">
                                <use xlink:href="/dist/img/svg-sprite.svg#down-arrow"></use>
                            </svg>
                        }
                        @if (navigation.Link == null)
                        {
                            @navigation.Text
                        }
                        else
                        {
                            <a href="@navigation.Link.Url" target="@navigation.Link.Target">@navigation.Text</a>
                        }
                    </li>
                    @if (navigation.Children.Any())
                    {
                        <li class="main-menu__section-wrapper">
                            <ul>
                                @foreach (var navigationChild in navigation.Children)
                                {
                                    <li class="main-menu__hoverable">
                                        <a href="@navigationChild.Link.Url" target="@navigationChild.Link.Target" class="main-menu__section-link">@navigationChild.Text</a>
                                    </li>
                                }
                            </ul>
                        </li>
					}
                </ul>
			}
		}
	}
</div>
