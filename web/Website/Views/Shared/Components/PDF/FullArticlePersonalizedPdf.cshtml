@model Informa.Web.ViewModels.PDF.PersonalizedPdfViewModel
@using Informa.Web.Models

@{
    Layout = null;
}

<div class="article-body-content" id="article-body-content">
    <div class="article-metadata">
        <table>
            <tr>
                <td style="float: left; font-size: 15px; line-height: 20px; border-right:1px solid #5a5758; padding:0 10px 0 0; font-weight: 700;">
                    <span class="article-metadata__date">@Model.PublishDate.ToString("dd MMM yyyy")</span>
                </td>
                @if (!string.IsNullOrEmpty(Model.ContentType))
                {
                    <td style="float: left; font-size: 15px; line-height: 20px;  border-right:1px solid #5a5758; padding:0 10px 0 10px; font-weight: 700;">
                        @if (!string.IsNullOrEmpty(Model.ContentType) && Model.ContentType.Length > 15)
                        {
                            var trimmedContentType = new string(Model.ContentType.Take(15).ToArray()) + " ...";
                            <span class="article-content-type">@trimmedContentType</span>
                        }
                        else
                        {
                            <span class="article-content-type">@Model.ContentType</span>
                        }
                    </td>
                }

                @{ int counter = 0;}
                @foreach (var tag in Model.Texonomies)
                {
                    counter = counter + 1;
                    if (counter < Model.Texonomies.Count())
                    {
                        <td style="float: left; font-size: 16px; line-height: 25px;  border-right:1px solid #5a5758; padding:0 10px 0 10px; font-weight: 700;">
                            <a style="color:#be1e2d; text-decoration:none;" href="@tag.LinkableUrl">@tag.LinkableText</a>
                        </td>
                    }
                    else
                    {
                        <td style="float: left; font-size: 16px; line-height: 25px; padding:0 10px 0 10px; font-weight: 700;">
                            <a style="color:#be1e2d; text-decoration:none;" href="@tag.LinkableUrl">@tag.LinkableText</a>
                        </td>
                    }
                }

            </tr>
        </table>
        <h1><a class="article-title" style="color:#be1e2d; text-decoration:none;" href="@Model.abslouteUrl">@Html.Raw(Model.Title)</a></h1>
        <h3>@Html.Raw(Model.Sub_Title)</h3>
    </div>


  @* MULTIPLE AUTHORS *@
    @{
        var authors = Model.Author.Take(3).ToArray();
    }
    @if (authors.Length == 1)
    {
        var author = authors.FirstOrDefault();
        @* SINGLE AUTHOR*@
        <div class="article-author article-author--solo">
            <table>
                <tr class="article-author__list">

                    <td class="article-author__solo-wrapper" style="color:#58595b; text-decoration:none; padding: 0 0 20px 0; white-space: nowrap;">
                        <span>
                            by
                            @if (author.InActive)
                            {
                                @author.Name
                            }
                            else
                            {
                                <a style="color:#58595b; text-decoration:none;" href="@author.AuthorLink">@author.Name</a>
                            }
                        </span>
                        <span class="article-author__contact" style="color:#be1e2d; text-decoration:none;">
                            <table cellpadding="0" cellspacing="0">
                                <tr><td height="10">&nbsp;</td></tr>
                                <tr>
                                    <td style="padding:0 10px 0 0;">
                                        @if (!string.IsNullOrEmpty(author.Twitter))
                                        {
                                            <a style="color:#be1e2d; text-decoration:none;" href="http://www.twitter.com/@author.Twitter" target="_blank" class="click-utag" data-info='{"event_name" : "author-twitter"}'>&#64;@author.Twitter</a>
                                        }
                                    </td>

                                    <td style="width: 10px;"></td>
                                    <td style="border-left:1px solid #5a5758;"></td>
                                    <td style="width: 10px;"></td>
                                    <td style="padding:0 10px 0 10px;">

                                        @if (!string.IsNullOrEmpty(author.Email_Address))
                                        {
                                            <a style="color:#be1e2d; text-decoration:none;" href="mailto:@author.Email_Address" class="click-utag" data-info='{"event_name" : "mail-to-author"}'>@author.Email_Address</a>
                                        }
                                    </td>
                                </tr>
                            </table>
                        </span>
                    </td>
                </tr>
                <tr><td>&nbsp;</td></tr>
            </table>
        </div>
            <table>
                <tr><td>  <img src="/~/media/Icons/PDF%20Icons/borderline.gif" alt="border-line" /> </td></tr>
                <tr><td>&nbsp;</td></tr>
            </table>

            @* END SINGLE AUTHOR *@

    }
    else if (authors.Length > 1)
    {
        <div class="article-author">
            <table>

                @foreach (var author in authors)
                    {
                    <tr class="article-author__list">
                        <span>by</span>
                        <td>
                            @if (author.InActive)
                            {
                                @author.Name
                            }
                            else
                            {
                                <a style="color:#58595b; text-decoration:none;" href="@author.AuthorLink">@author.Name</a>
                                    @*<span class="article-author__name" style="color:#58595b; text-decoration:none; padding: 0 0 20px 0;"><a href="@author.AuthorLink">@author.Name</a></span>*@
                            }

                            <span class="article-author__contact" style="color:#be1e2d; text-decoration:none;">
                                <table cellpadding="0" cellspacing="0">
                                    <tr>
                                        <td style="border-right:1px solid #5a5758;  padding:0 10px 0 0;">
                                            @if (!string.IsNullOrEmpty(author.Twitter))
                                            {
                                                <a style="color:#be1e2d; text-decoration:none;" href="http://www.twitter.com/@author.Twitter" target="_blank" class="click-utag" data-info='{"event_name" : "author-twitter"}'>&#64;@author.Twitter</a>
                                            }
                                        </td>

                                        <td style="width: 10px;"></td>
                                        <td style="border-left:1px solid #5a5758;"></td>
                                        <td style="width: 10px;"></td>
                                        <td style="padding:0 10px 0 10px;">

                                            @if (!string.IsNullOrEmpty(author.Email_Address))
                                            {
                                                <a style="color:#be1e2d; text-decoration:none;" href="mailto:@author.Email_Address" class="click-utag" data-info='{"event_name" : "mail-to-author"}'>@author.Email_Address</a>
                                            }
                                        </td>
                                    </tr>
                                </table>
                            </span>
                        </td>
                    </tr>
                }

            </table>
        </div>
            @* END MULTIPLE AUTHORs *@
    }

    @* If plugin created summary for article, it's the same as first paragraph... so hide summary. *@
    @if (!string.IsNullOrEmpty(Model.Summary) && !Model.Body.Contains(Model.Summary))
    {
        @* * * Executive Summary *@

        <div class="article-executive-summary">
        <h4 style="font-size:24px; font-weight:700; margin-bottom:0; padding:0;">@Model.ExecutiveSummary</h4>
        <div class="article-executive-summary-body" style="font-size:15px;color:#58595b; text-align:justify">@Model.Summary</div>
        </div>
        @* End Executive Summary  *@
    }

@if (!string.IsNullOrEmpty(Model.ImageUrl))
{
    @* * *  ARTICLE - FEATURED IMAGE
        IIPP-117 *@
    <div class="article-inline-image" style="float: left; padding-right: 40px; width:500px;">
        <table width="100%" cellpadding="0" cellspacing="0" border="0">
            <tr><td>&nbsp;</td></tr>
            <tr><td>&nbsp;</td></tr>
            <tr>
                <td colspan="2"><img src="@Model.GetScaledImage(790)" alt="@Model.ImageAltText"></td>
            </tr>
            <tr><td>&nbsp;</td></tr>
            <tr>
                <td align="left">
                    <span class="article-inline-image__caption" style="text-align:left; color:#58595b; font-size:18px; line-height:20px;">@Model.ImageCaption</span>
                </td>
                <td align="right">
                    @if (!string.IsNullOrEmpty(Model.ImageSource))
                    {

                        <span class="article-inline-image__source" style="text-align:right; font-style:italic; color:#58595b; font-size:18px; line-height:20px;">
                            @Model.ImageSource
                        </span>
                    }
                </td>
            </tr>
        </table>
    </div>
}
        @* * *  END ARTICLE - FEATURED IMAGE *@
    @Html.Raw(Html.TokenTransform().RenderTokenBody(x => x.Body, "../Article/_ArticleSidebar"))

</div>
@if (Model.RelatedArticles != null && Model.RelatedArticles.Any())
{
    <table>
        <tr><td>&nbsp;</td></tr>
        <tr><td><img src="/~/media/Icons/PDF%20Icons/borderline.gif" alt="border-line" style="height: 1px; overflow: hidden;" /> </td></tr>
        <tr><td>&nbsp;</td></tr>
    </table>
    <div class="article-related-content">
        <h2>Related Content</h2>
        <table width="100%">
            @foreach (var article in Model.RelatedArticles)
            {
                //Html.RenderPartial("/Views/Shared/Components/PDF/PDFRelatedArticles.cshtml", article);
                <tr>
                    <td>
                        <span style="float: left; margin-right:10px; margin-top:5px; margin-bottom:20px;">
                            <img src="/~/media/Icons/PDF%20Icons/arrowpdf.gif" alt="arrow" />
                            <span style="font-size: 17px; line-height: 20px; color:#be1e2d; font-weight: 700; margin-top:5px; font-family: Roboto, Helvetica, Arial, sans-serif;">
                                <a style="font-size: 17px; line-height: 20px; color:#be1e2d; font-weight: 700; text-decoration:none; margin-top:5px;" class="click-utag"
                                   href="@article.LinkableUrl"
                                   data-info='{
			"event_name": "related_content_click_through",
			"related-article": "@article.ListableTitle",
			"click_through_destination": "@article.ListableTitle"
		}'>
                                    @Html.Raw(article.ListableTitle)
                                </a>
                            </span>
                        </span>
                    </td>
                </tr>
            }
        </table>
    </div>
}
<table>
    <tr><td>&nbsp;</td></tr>
    <tr><td><img src="/~/media/Icons/PDF%20Icons/borderline.gif" alt="border-line" /> </td></tr>
    <tr><td>&nbsp;</td></tr>
</table>

