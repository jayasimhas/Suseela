$main-menu-width: 330px;
$main-menu-handle-width: 70px;

.main-menu {
	@include textMix('Roboto', 1rem, 400);

	align-items: stretch;
	background-color: $informa-light-gray-e;
	border-right: $main-menu-handle-width solid $informa-darker-gray;
	flex: 0 0 auto;
	float: left;
	width: $main-menu-width;
	z-index: 999999;

	// Start off translated on-screen just enough to see the handle
	transform: translate3d($main-menu-handle-width, 0, 0);
	transition: all 300ms cubic-bezier(0.450, 0.520, 0.220, 1.085);

	&.is-active {
		transform: translate3d($main-menu-width, 0, 0);
	}

	// At smaller widths, we use the `--mini` toggler instead
	// Remove the thick handle, don't show permatoggler on the left when closed
	@include breakpoint('medium') {
		border-right: 1px solid $informa-light-gray-d;
		margin-right: $main-menu-handle-width;
		transform: translate3d(0, 0, 0);
		width: 260px;
	}

	&__section {
		border-bottom: 1px solid $informa-light-gray-d;
		margin: 0;
		padding: 1rem 0;
		background-color: $informa-light-gray-f;
	}

	&__section-title,
	&__section-link {
		padding: 0.625rem 0;
		display: inline-block;
	}

	&__section-title {
		cursor: pointer;
		padding-left: 1.5rem;
		text-transform: uppercase;
		font-weight: 600;
		letter-spacing: 1.2px;
		width: 100%;
	}
	&__arrow-icon {
		@include svg-fill($informa-dark-gray);
		position: absolute;
		right: 1rem;
		top: 0.5rem;
		transition: transform 250ms ease-out;
	}

	&__section-link {
		margin: 0;
		color: $informa-mid-gray;
	}

	&__section-wrapper {
		transition: all 150ms ease-out;
		transform: scaleY(0);
		transform-origin: top;
		max-height: 0;
	}

	&__footer-link {
		padding: 0 0 0 1.5rem;
		line-height: 2rem;
		margin: 0;
		font-size: 0.9375rem;

		a {
			color: $informa-dark-gray;

			&:hover,
			&:active {
				color: $informa-red;
			}
			&:after {
				content: "\a0 â€º"; // "\ao " is a non-breaking space
				display: inline;
				font-size: 1rem;
			}
		}
	}
}

// Toggle menu section link visibility on-click
.main-menu__section-title.is-active {

	.main-menu__arrow-icon {
		transform: rotateX(-180deg);
	}

	&~ .main-menu__section-wrapper {
		transform: scaleY(1);
		max-height: 999px;
	}
}

.main-menu__hoverable {
	position: relative;

	.main-menu__section-link {
		padding-left: 2.5rem;
	}
	&:hover:before {
		background-color: $informa-dark-orange;
		content: "";
		display: block;
		height: 100%;
		left: 0;
		position: absolute;
		top: 0;
		width: 6px;
	}
}
